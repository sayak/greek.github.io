<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		
		<title>Greek</title>

		<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-polyfill/6.26.0/polyfill.js"></script>
		
		<script>
			var audio;
			var active;
			

			function pause()
			{
				if (audio) 
					audio.pause(); 
				
				if (active) 
				{
					active.pause(); 
					active.currentTime = 0;
				}
			}	
					
			function play(url) 
			{
				pause();
				
				audio = new Audio(url); 
				
				audio.play();	
			}
			
			function play2(id)
			{
				pause();
				
				active = document.getElementById(id);
				
				active.play();
			}
		</script>

		<script>
			
			var req = new XMLHttpRequest();
			
			req.onreadystatechange = function() {
			    if (this.readyState == 4) 
			    {
			        var ships = JSON.parse(this.responseText);
					for (var i = 0; i < ships.length; i++) 
					{
						var n = i < 9 ? '0' + (i+1) : '' + (i+1);

						var parent = document.getElementById("ships");
						
						var image = document.createElement("span");
						image.innerHTML = '<a href="#ring' + n + '"><span class="ring" id="ring' + n + '"><img src="' + n + '.gif" onclick="play2(\'' + n + '.mp3' + '\');"/><h2>' + (i+1) + '</h2><h3>' + ships[i].greek + '</h3></span></a>'
						parent.appendChild(image);
					}			        
					
					for (var j = 0; j < ships.length; j++) 
					{
						var n = j < 9 ? '0' + (j+1) : '' + (j+1);

						var parent = document.getElementById("sounds");
						
						var audio = document.createElement("audio");
						audio.id = n + ".mp3";
						audio.src= n + ".mp3";
						audio.preload="true";
						parent.appendChild(audio);
					}
			    }
			};
			
			req.open("GET", "ships.json", true);
			req.send();
		
		</script>		
		
		<meta name="viewport" content="height=device-height">
		
		<style type="text/css" media="screen">
		
			body
			{
				overflow: hidden;
				overflow-x: auto; 
			}
			
			* 
			{
				-webkit-tap-highlight-color: transparent;
			}
			
			#ships
			{
				white-space: nowrap;
			}
			
			a 
			{
				display: inline-block;

				text-decoration: none;
			}
			
			a span 
			{
				display: inline-block;
				vertical-align: middle;				
			}
			
			h2 
			{
				display: block;
				
				margin; 0;
				
				font: 14px/14px sans-serif;
				
				color: grey;

				text-align: center;
			}
			
			.ring:target h2
			{
				font: 20px/14px sans-serif;
			}
			
			h3
			{
				display: block;
				position: absolute;
				
				margin: 0;
				
				width: 150px;
				font: 12px sans-serif;
				color: grey;
				white-space: pre-wrap;
				text-align: center;
			}
			
			.ring:target h3
			{
				width: 255px;
				font: 18px sans-serif;
			}
			
			.ring img
			{
				display: inline-block;
				
				width: 150px;
				height: 100px;
				background: red;
				border-radius: 150px / 100px;
				
				transition-duration: 0.05s;
			}
			
			.ring:target img 
			{
				width: 255px;
				height: 170px;
				border-radius: 255px / 170px;
			}	
		</style>
	</head>
	
	<body>
		<div id="ships">
<!--
			<a href="#ring1"><span class="ring" id="ring1"><img src="01.jpg" onclick="play2('01.mp3');"/><h2>1</h2><h3>ἔαρ</h3></span></a>
-->
		</div>
		
		<div id="sounds">	
		</div>
	</body>
</html>